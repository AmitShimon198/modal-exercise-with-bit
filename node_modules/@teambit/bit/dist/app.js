"use strict";

require("core-js/modules/es.promise.js");

require("./hook-require");

function _bootstrap() {
  const data = require("@teambit/legacy/dist/bootstrap");

  _bootstrap = function () {
    return data;
  };

  return data;
}

function _handleErrors() {
  const data = require("@teambit/legacy/dist/cli/handle-errors");

  _handleErrors = function () {
    return data;
  };

  return data;
}

function _loadBit() {
  const data = require("./load-bit");

  _loadBit = function () {
    return data;
  };

  return data;
}

/* eslint-disable import/no-dynamic-require */

/* eslint-disable import/first */
process.on('uncaughtException', err => {
  // eslint-disable-next-line no-console
  console.error('uncaughtException', err);
  process.exit(1);
});

require('v8-compile-cache');

// eslint-disable-next-line @typescript-eslint/no-floating-promises
initApp();

async function initApp() {
  try {
    await (0, _bootstrap().bootstrap)(); // registerCoreExtensions();
    // const harmony = await Harmony.load([ConfigExt], {});

    await (0, _loadBit().runCLI)();
  } catch (err) {
    const originalError = err.originalError || err;
    await (0, _handleErrors().handleErrorAndExit)(originalError, process.argv[2]);
  }
}

//# sourceMappingURL=app.js.map