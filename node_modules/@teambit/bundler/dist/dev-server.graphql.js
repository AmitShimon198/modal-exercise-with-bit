"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.devServerSchema = devServerSchema;

function _client() {
  const data = require("@apollo/client");

  _client = function () {
    return data;
  };

  return data;
}

// TODO: this has to be refactored to the Preview aspect. with the entire preview logic here.
function devServerSchema(bundler) {
  return {
    typeDefs: (0, _client().gql)`
      extend type Component {
        server: ComponentServer
      }

      type ComponentServer {
        env: String
        url: String
      }
    `,
    resolvers: {
      Component: {
        server: component => {
          const componentServer = bundler.getComponentServer(component);
          if (!componentServer) return {};
          return {
            env: componentServer.context.envRuntime.id,
            url: componentServer.url
          };
        }
      }
    }
  };
}

//# sourceMappingURL=dev-server.graphql.js.map