import { Component, ComponentID } from '@teambit/component';
import { EnvsMain } from '@teambit/envs';
import type { PubsubMain } from '@teambit/pubsub';
import { SerializableResults, Workspace } from '@teambit/workspace';
import { BitId } from '@teambit/legacy-bit-id';
import ConsumerComponent from '@teambit/legacy/dist/consumer/component';
import { Dist } from '@teambit/legacy/dist/consumer/component/sources';
import { AspectLoaderMain } from '@teambit/aspect-loader';
import { UiMain } from '@teambit/ui';
import type { PreStartOpts } from '@teambit/ui';
import { Compiler } from './types';
export declare type BuildResult = {
    component: string;
    buildResults: string[] | null | undefined;
};
export declare type CompileOptions = {
    changed?: boolean;
    verbose?: boolean;
    deleteDistDir?: boolean;
};
export declare type CompileError = {
    path: string;
    error: Error;
};
export declare class ComponentCompiler {
    private pubsub;
    private workspace;
    private component;
    private compilerInstance;
    private compilerId;
    private dists;
    private compileErrors;
    constructor(pubsub: PubsubMain, workspace: Workspace, component: ConsumerComponent, compilerInstance: Compiler, compilerId: string, dists?: Dist[], compileErrors?: CompileError[]);
    compile(noThrow: boolean | undefined, options: CompileOptions): Promise<BuildResult>;
    private throwOnCompileErrors;
    private get distDir();
    private get componentDir();
    private compileOneFileWithNewCompiler;
    private compileAllFilesWithNewCompiler;
}
export declare class WorkspaceCompiler {
    private workspace;
    private envs;
    private pubsub;
    private aspectLoader;
    private ui;
    constructor(workspace: Workspace, envs: EnvsMain, pubsub: PubsubMain, aspectLoader: AspectLoaderMain, ui: UiMain);
    onPreStart(preStartOpts: PreStartOpts): Promise<void>;
    onAspectLoadFail(err: Error & {
        code?: string;
    }, id: ComponentID): Promise<boolean>;
    onComponentChange(component: Component): Promise<SerializableResults>;
    compileComponents(componentsIds: string[] | BitId[], options: CompileOptions, noThrow?: boolean): Promise<BuildResult[]>;
    private getIdsToCompile;
}
