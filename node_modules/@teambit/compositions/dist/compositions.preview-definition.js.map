{"version":3,"sources":["compositions.preview-definition.ts"],"names":["CompositionPreviewDefinition","constructor","compositions","renderTemplatePath","context","env","getMounter","getModuleMap","components","map","getPreviewFiles","filter","value","length"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAOO,MAAMA,4BAAN,CAAgE;AAGrEC,EAAAA,WAAW,CAASC,YAAT,EAAyC;AAAA,SAAhCA,YAAgC,GAAhCA,YAAgC;AAAA,oDAFlC,cAEkC;AAAE;;AAE9B,QAAlBC,kBAAkB,CAACC,OAAD,EAA6C;AACnE,WAAOA,OAAO,CAACC,GAAR,CAAYC,UAAZ,EAAP;AACD;;AAEiB,QAAZC,YAAY,CAACC,UAAD,EAAkE;AAClF,UAAMC,GAAG,GAAG,KAAKP,YAAL,CAAkBQ,eAAlB,CAAkCF,UAAlC,CAAZ;AACA,WAAOC,GAAG,CAACE,MAAJ,CAAYC,KAAD,IAAWA,KAAK,CAACC,MAAN,KAAiB,CAAvC,CAAP;AACD;;AAZoE","sourcesContent":["import { Component, ComponentMap } from '@teambit/component';\nimport { ExecutionContext } from '@teambit/envs';\nimport { PreviewDefinition } from '@teambit/preview';\nimport { AbstractVinyl } from '@teambit/legacy/dist/consumer/component/sources';\n\nimport { CompositionsMain } from './compositions.main.runtime';\n\nexport class CompositionPreviewDefinition implements PreviewDefinition {\n  readonly prefix = 'compositions';\n\n  constructor(private compositions: CompositionsMain) {}\n\n  async renderTemplatePath(context: ExecutionContext): Promise<string> {\n    return context.env.getMounter();\n  }\n\n  async getModuleMap(components: Component[]): Promise<ComponentMap<AbstractVinyl[]>> {\n    const map = this.compositions.getPreviewFiles(components);\n    return map.filter((value) => value.length !== 0);\n  }\n}\n"]}