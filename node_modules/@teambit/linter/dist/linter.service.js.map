{"version":3,"sources":["linter.service.ts"],"names":["LinterService","constructor","linterConfig","run","context","options","mergedOpts","linterContext","Object","assign","quiet","extensionFormats","fixTypes","fix","linter","env","getLinter","results","lint"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAMO,MAAMA,aAAN,CAAuD;AAG5DC,EAAAA,WAAW,CAASC,YAAT,EAAqC;AAAA,SAA5BA,YAA4B,GAA5BA,YAA4B;AAAA,kDAFzC,QAEyC;AAAE;;AAEzC,QAAHC,GAAG,CAACC,OAAD,EAA4BC,OAA5B,EAA0E;AACjF,UAAMC,UAAU,GAAG,wBAASD,OAAT,EAAkB,KAAKH,YAAvB,CAAnB;AACA,UAAMK,aAA4B,GAAGC,MAAM,CAACC,MAAP,CACnC,EADmC,EAEnC;AACEC,MAAAA,KAAK,EAAE,KADT;AAEEC,MAAAA,gBAAgB,EAAEL,UAAU,CAACK,gBAF/B;AAGEC,MAAAA,QAAQ,EAAEN,UAAU,CAACM,QAHvB;AAIEC,MAAAA,GAAG,EAAEP,UAAU,CAACO;AAJlB,KAFmC,EAQnCT,OARmC,CAArC;AAUA,UAAMU,MAAc,GAAGV,OAAO,CAACW,GAAR,CAAYC,SAAZ,CAAsBT,aAAtB,CAAvB;AAEA,UAAMU,OAAO,GAAG,MAAMH,MAAM,CAACI,IAAP,CAAYX,aAAZ,CAAtB;AACA,WAAOU,OAAP;AACD;;AArB2D","sourcesContent":["import { defaults } from 'lodash';\nimport { EnvService, ExecutionContext } from '@teambit/envs';\nimport { Linter, LintResults } from './linter';\nimport { LinterContext, LinterOptions } from './linter-context';\nimport { LinterConfig } from './linter.main.runtime';\n\nexport class LinterService implements EnvService<LintResults> {\n  name = 'linter';\n\n  constructor(private linterConfig: LinterConfig) {}\n\n  async run(context: ExecutionContext, options: LinterOptions): Promise<LintResults> {\n    const mergedOpts = defaults(options, this.linterConfig);\n    const linterContext: LinterContext = Object.assign(\n      {},\n      {\n        quiet: false,\n        extensionFormats: mergedOpts.extensionFormats,\n        fixTypes: mergedOpts.fixTypes,\n        fix: mergedOpts.fix,\n      },\n      context\n    );\n    const linter: Linter = context.env.getLinter(linterContext);\n\n    const results = await linter.lint(linterContext);\n    return results;\n  }\n}\n"]}