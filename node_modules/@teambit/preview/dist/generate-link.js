"use strict";

require("core-js/modules/es.array.iterator.js");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.generateLink = generateLink;

function _toolboxPath() {
  const data = require("@teambit/toolbox.path.to-windows-compatible-path");

  _toolboxPath = function () {
    return data;
  };

  return data;
}

// :TODO refactor to building an AST and generate source code based on it.
function generateLink(prefix, componentMap, defaultModule) {
  return `
import { linkModules } from '${(0, _toolboxPath().toWindowsCompatiblePath)(require.resolve('./preview.preview.runtime'))}';
import harmony from '${(0, _toolboxPath().toWindowsCompatiblePath)(require.resolve('@teambit/harmony'))}';
${defaultModule ? `const defaultModule = require('${(0, _toolboxPath().toWindowsCompatiblePath)(defaultModule)}'` : ''});
linkModules('${prefix}', defaultModule, {
  ${componentMap.toArray().map(([component, modulePaths]) => {
    return `'${component.id.fullName}': [${modulePaths.map(path => `require('${(0, _toolboxPath().toWindowsCompatiblePath)(path)}')`).join(', ')}]`;
  }).join(',\n')}
});  
`;
}

//# sourceMappingURL=generate-link.js.map