{"version":3,"sources":["format-webpack-messages.js"],"names":["friendlySyntaxErrorLabel","isLikelyASyntaxError","message","indexOf","formatMessage","error","lines","split","filter","line","test","map","parsingError","exec","errorLine","errorColumn","errorMessage","join","replace","length","trim","splice","match","index","arr","formatWebpackMessages","json","formattedErrors","errors","formattedWarnings","warnings","result","some","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst friendlySyntaxErrorLabel = 'Syntax error:';\n\nfunction isLikelyASyntaxError(message) {\n  return message.indexOf(friendlySyntaxErrorLabel) !== -1;\n}\n\n// Cleans up webpack error messages.\nfunction formatMessage(error) {\n  let message = error.message;\n  let lines = message.split('\\n');\n\n  // Strip webpack-added headers off errors/warnings\n  // https://github.com/webpack/webpack/blob/master/lib/ModuleError.js\n  lines = lines.filter((line) => !/Module [A-z ]+\\(from/.test(line));\n\n  // Transform parsing error into syntax error\n  // TODO: move this to our ESLint formatter?\n  lines = lines.map((line) => {\n    const parsingError = /Line (\\d+):(?:(\\d+):)?\\s*Parsing error: (.+)$/.exec(line);\n    if (!parsingError) {\n      return line;\n    }\n    const [, errorLine, errorColumn, errorMessage] = parsingError;\n    return `${friendlySyntaxErrorLabel} ${errorMessage} (${errorLine}:${errorColumn})`;\n  });\n\n  message = lines.join('\\n');\n  // Smoosh syntax errors (commonly found in CSS)\n  message = message.replace(/SyntaxError\\s+\\((\\d+):(\\d+)\\)\\s*(.+?)\\n/g, `${friendlySyntaxErrorLabel} $3 ($1:$2)\\n`);\n  // Clean up export errors\n  message = message.replace(\n    /^.*export '(.+?)' was not found in '(.+?)'.*$/gm,\n    `Attempted import error: '$1' is not exported from '$2'.`\n  );\n  message = message.replace(\n    /^.*export 'default' \\(imported as '(.+?)'\\) was not found in '(.+?)'.*$/gm,\n    `Attempted import error: '$2' does not contain a default export (imported as '$1').`\n  );\n  message = message.replace(\n    /^.*export '(.+?)' \\(imported as '(.+?)'\\) was not found in '(.+?)'.*$/gm,\n    `Attempted import error: '$1' is not exported from '$3' (imported as '$2').`\n  );\n  lines = message.split('\\n');\n\n  // Remove leading newline\n  if (lines.length > 2 && lines[1].trim() === '') {\n    lines.splice(1, 1);\n  }\n  // Clean up file name\n  lines[0] = lines[0].replace(/^(.*) \\d+:\\d+-\\d+$/, '$1');\n\n  // Cleans up verbose \"module not found\" messages for files and packages.\n  if (lines[1] && lines[1].indexOf('Module not found: ') === 0) {\n    lines = [\n      lines[0],\n      lines[1].replace('Error: ', '').replace('Module not found: Cannot find file:', 'Cannot find file:'),\n    ];\n  }\n\n  // Add helpful message for users trying to use Sass for the first time\n  if (lines[1] && lines[1].match(/Cannot find module.+node-sass/)) {\n    lines[1] = 'To import Sass files, you first need to install node-sass.\\n';\n    lines[1] += 'Run `npm install node-sass` or `yarn add node-sass` inside your workspace.';\n  }\n\n  message = lines.join('\\n');\n  // Internal stacks are generally useless so we strip them... with the\n  // exception of stacks containing `webpack:` because they're normally\n  // from user code generated by webpack. For more information see\n  // https://github.com/facebook/create-react-app/pull/1050\n  message = message.replace(/^\\s*at\\s((?!webpack:).)*:\\d+:\\d+[\\s)]*(\\n|$)/gm, ''); // at ... ...:x:y\n  message = message.replace(/^\\s*at\\s<anonymous>(\\n|$)/gm, ''); // at <anonymous>\n  lines = message.split('\\n');\n\n  // Remove duplicated newlines\n  lines = lines.filter(\n    (line, index, arr) => index === 0 || line.trim() !== '' || line.trim() !== arr[index - 1].trim()\n  );\n\n  // Reassemble the message\n  message = lines.join('\\n');\n  return message.trim();\n}\n\nfunction formatWebpackMessages(json) {\n  const formattedErrors = json.errors.map(formatMessage);\n  const formattedWarnings = json.warnings.map(formatMessage);\n  const result = { errors: formattedErrors, warnings: formattedWarnings };\n  if (result.errors.some(isLikelyASyntaxError)) {\n    // If there are any syntax errors, show just them.\n    result.errors = result.errors.filter(isLikelyASyntaxError);\n  }\n  return result;\n}\n\nmodule.exports = formatWebpackMessages;\n"]}