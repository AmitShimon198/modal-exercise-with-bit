{"version":3,"sources":["webpack.config.base.prod.ts"],"names":["optimization","minimize","minimizer","TerserPlugin","terserOptions","parse","ecma","compress","warnings","comparisons","inline","mangle","safari10","output","comments","ascii_only","CssMinimizerPlugin","minimizerOptions","preset","minifyFontValues","removeQuotes","splitChunks","chunks","runtimeChunk","name","entrypoint","plugins","WebpackManifestPlugin","fileName","publicPath","generate","seed","files","entrypoints","manifestFiles","reduce","manifest","file","path","entrypointFiles","main","filter","endsWith","JSON","stringify","WorkboxWebpackPlugin","GenerateSW","clientsClaim","exclude","navigateFallback","navigateFallbackDenylist","RegExp","Boolean","performance"],"mappings":"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","sourcesContent":["import WorkboxWebpackPlugin from 'workbox-webpack-plugin';\nimport CssMinimizerPlugin from 'css-minimizer-webpack-plugin';\nimport TerserPlugin from 'terser-webpack-plugin';\nimport { Configuration } from 'webpack';\nimport { WebpackManifestPlugin } from 'webpack-manifest-plugin';\n\n// This is the production and development configuration.\n// It is focused on developer experience, fast rebuilds, and a minimal bundle.\n// eslint-disable-next-line complexity\nexport default function (): Configuration {\n  return {\n    optimization: {\n      minimize: true,\n      minimizer: [\n        // This is only used in production mode\n        new TerserPlugin({\n          terserOptions: {\n            parse: {\n              // We want terser to parse ecma 8 code. However, we don't want it\n              // to apply any minification steps that turns valid ecma 5 code\n              // into invalid ecma 5 code. This is why the 'compress' and 'output'\n              // sections only apply transformations that are ecma 5 safe\n              // https://github.com/facebook/create-react-app/pull/4234\n              ecma: 8,\n            },\n            compress: {\n              ecma: 5,\n              warnings: false,\n              // Disabled because of an issue with Uglify breaking seemingly valid code:\n              // https://github.com/facebook/create-react-app/issues/2376\n              // Pending further investigation:\n              // https://github.com/mishoo/UglifyJS2/issues/2011\n              comparisons: false,\n              // Disabled because of an issue with Terser breaking valid code:\n              // https://github.com/facebook/create-react-app/issues/5250\n              // Pending further investigation:\n              // https://github.com/terser-js/terser/issues/120\n              inline: 2,\n            },\n            mangle: {\n              safari10: true,\n            },\n            output: {\n              ecma: 5,\n              comments: false,\n              // Turned on because emoji and regex is not minified properly using default\n              // https://github.com/facebook/create-react-app/issues/2488\n              ascii_only: true,\n            },\n          },\n        }),\n        new CssMinimizerPlugin({\n          minimizerOptions: {\n            preset: [\n              'default',\n              {\n                minifyFontValues: { removeQuotes: false },\n              },\n            ],\n          },\n        }),\n      ],\n      // Automatically split vendor and commons\n      // https://twitter.com/wSokra/status/969633336732905474\n      // https://medium.com/webpack/webpack-4-code-splitting-chunk-graph-and-the-splitchunks-optimization-be739a861366\n      splitChunks: {\n        chunks: 'all',\n        // name: false,\n      },\n      // Keep the runtime chunk separated to enable long term caching\n      // https://twitter.com/wSokra/status/969679223278505985\n      // https://github.com/facebook/create-react-app/issues/5358\n      runtimeChunk: {\n        name: (entrypoint) => `runtime-${entrypoint.name}`,\n      },\n    },\n\n    plugins: [\n      // Generate an asset manifest file with the following content:\n      // - \"files\" key: Mapping of all asset filenames to their corresponding\n      //   output file so that tools can pick it up without having to parse\n      //   `index.html`\n      //   can be used to reconstruct the HTML if necessary\n      new WebpackManifestPlugin({\n        fileName: 'asset-manifest.json',\n        publicPath: 'public',\n        generate: (seed, files, entrypoints) => {\n          const manifestFiles = files.reduce((manifest, file) => {\n            manifest[file.name] = file.path;\n            return manifest;\n          }, seed);\n          const entrypointFiles = entrypoints.main.filter((fileName) => !fileName.endsWith('.map'));\n\n          return {\n            files: JSON.stringify(manifestFiles),\n            entrypoints: JSON.stringify(entrypointFiles),\n          };\n        },\n      }),\n      // Generate a service worker script that will precache, and keep up to date,\n      // the HTML & assets that are part of the webpack build.\n      new WorkboxWebpackPlugin.GenerateSW({\n        clientsClaim: true,\n        exclude: [/\\.map$/, /asset-manifest\\.json$/],\n        // importWorkboxFrom: 'cdn',\n        navigateFallback: 'public/index.html',\n        navigateFallbackDenylist: [\n          // Exclude URLs starting with /_, as they're likely an API call\n          new RegExp('^/_'),\n          // Exclude any URLs whose last part seems to be a file extension\n          // as they're likely a resource and not a SPA route.\n          // URLs containing a \"?\" character won't be blacklisted as they're likely\n          // a route with query params (e.g. auth callbacks).\n          new RegExp('/[^/?]+\\\\.[^/]+$'),\n        ],\n      }),\n    ].filter(Boolean),\n    // Turn off performance processing because we utilize\n    // our own hints via the FileSizeReporter\n    performance: false,\n  };\n}\n"]}