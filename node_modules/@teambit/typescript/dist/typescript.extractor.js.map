{"version":3,"sources":["typescript.extractor.ts"],"names":["TypeScriptExtractor","constructor","tsconfig","extract","component","paths","state","filesystem","files","map","file","path","filter","endsWith","app","Application","bootstrap","entryPoints","project","convert","Error","serializer","projectToObject"],"mappings":";;;;;;;;;AAKA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AALA;AAEA;AAKO,MAAMA,mBAAN,CAAqD;AAC1DC,EAAAA,WAAW,CAASC,QAAT,EAAuC;AAAA,SAA9BA,QAA8B,GAA9BA,QAA8B;AAAE;;AAEvC,QAAPC,OAAO,CAACC,SAAD,EAAuB;AAClC;AACA,UAAMC,KAAK,GAAGD,SAAS,CAACE,KAAV,CAAgBC,UAAhB,CAA2BC,KAA3B,CAAiCC,GAAjC,CAAsCC,IAAD,IAAUA,IAAI,CAACC,IAApD,EAA0DC,MAA1D,CAAkED,IAAD,IAAUA,IAAI,CAACE,QAAL,CAAc,UAAd,CAA3E,CAAd,CAFkC,CAGlC;;AACA,UAAMC,GAAG,GAAG,KAAIC,sBAAJ,GAAZ;AACAD,IAAAA,GAAG,CAACE,SAAJ,CAAc;AACZ;AACAC,MAAAA,WAAW,EAAEZ;AAFD,KAAd;AAIA,UAAMa,OAAO,GAAGJ,GAAG,CAACK,OAAJ,EAAhB,CATkC,CAUlC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,QAAI,CAACD,OAAL,EAAc,MAAM,IAAIE,KAAJ,CAAU,gCAAV,CAAN;AACd,WAAON,GAAG,CAACO,UAAJ,CAAeC,eAAf,CAA+BJ,OAA/B,CAAP;AACD;;AAxByD","sourcesContent":["// import { tmpdir } from 'os';\nimport { TsConfigSourceFile } from 'typescript';\n// import { resolve, join } from 'path';\nimport { Module, SchemaExtractor } from '@teambit/schema';\nimport { Component } from '@teambit/component';\nimport { Application } from 'typedoc';\n\nexport class TypeScriptExtractor implements SchemaExtractor {\n  constructor(private tsconfig: TsConfigSourceFile) {}\n\n  async extract(component: Component) {\n    // const tsconfig = this.tsconfig;\n    const paths = component.state.filesystem.files.map((file) => file.path).filter((path) => path.endsWith('index.ts'));\n    // const paths = ['/Users/ranmizrahi/Bit/bit/scopes/workspace/workspace/index.ts'];\n    const app = new Application();\n    app.bootstrap({\n      // typedoc options here\n      entryPoints: paths,\n    });\n    const project = app.convert();\n    // typedocApp.options.setValues({\n    //   inputFiles: paths,\n    //   allowJs: true,\n    //   lib: ['lib.es2015.d.ts', 'lib.es2019.d.ts', 'lib.es6.d.ts', 'lib.dom.d.ts', 'lib.dom.iterable.d.ts'],\n    //   jsx: 2,\n    //   noEmit: true,\n    //   exclude: ['node_modules', '*.scss'],\n    //   esModuleInterop: true,\n    // });\n    if (!project) throw new Error('typedoc failed generating docs');\n    return app.serializer.projectToObject(project) as any as Module;\n  }\n}\n"]}