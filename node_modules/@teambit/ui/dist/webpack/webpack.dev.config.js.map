{"version":3,"sources":["webpack.dev.config.ts"],"names":["HtmlWebpackPlugin","require","ReactRefreshWebpackPlugin","errorOverlayMiddleware","evalSourceMapMiddleware","noopServiceWorkerMiddleware","redirectServedPath","getPublicUrlOrPath","path","html","clientHost","process","env","WDS_SOCKET_HOST","clientPath","WDS_SOCKET_PATH","port","WDS_SOCKET_PORT","publicUrlOrPath","NODE_ENV","moduleFileExtensions","module","exports","createWebpackConfig","devConfig","workspaceDir","entryFiles","title","aspectPaths","resolveWorkspacePath","relativePath","resolve","host","HOST","mode","snapshot","managedPaths","devtool","entry","main","output","filename","pathinfo","publicPath","chunkFilename","devtoolModuleFilenameTemplate","info","absoluteResourcePath","infrastructureLogging","level","stats","devServer","allowedHosts","static","directory","staticOptions","serveIndex","watch","compress","hot","historyApiFallback","disableDotRule","index","client","webSocketURL","hostname","pathname","onBeforeSetupMiddleware","app","server","use","onAfterSetupMiddleware","devMiddleware","slice","extensions","map","ext","alias","react","fallback","fs","stream","unsafeCache","rules","test","fullySpecified","enforce","include","descriptionData","componentId","value","exclude","loader","options","configFile","babelrc","presets","plugins","stylesRegexps","sassModuleRegex","modules","localIdentName","sourceMap","sassNoModuleRegex","lessModuleRegex","lessNoModuleRegex","cssModuleRegex","cssNoModulesRegex","inject","templateContent","chunks"],"mappings":"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","sourcesContent":["import * as stylesRegexps from '@teambit/webpack.modules.style-regexps';\nimport { pathNormalizeToLinux } from '@teambit/legacy/dist/utils';\nimport { WebpackConfigWithDevServer } from '@teambit/webpack';\n\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ReactRefreshWebpackPlugin = require('@pmmmwh/react-refresh-webpack-plugin');\nconst errorOverlayMiddleware = require('react-dev-utils/errorOverlayMiddleware');\nconst evalSourceMapMiddleware = require('react-dev-utils/evalSourceMapMiddleware');\nconst noopServiceWorkerMiddleware = require('react-dev-utils/noopServiceWorkerMiddleware');\nconst redirectServedPath = require('react-dev-utils/redirectServedPathMiddleware');\nconst getPublicUrlOrPath = require('react-dev-utils/getPublicUrlOrPath');\nconst path = require('path');\nconst { html } = require('./html');\n\n/*\n * Webpack config for the bit ui\n * i.e. `bit start --dev`,\n */\n\nconst clientHost = process.env.WDS_SOCKET_HOST;\nconst clientPath = process.env.WDS_SOCKET_PATH; // default is '/sockjs-node';\nconst port = process.env.WDS_SOCKET_PORT;\n\n// const reactRefreshRuntimeEntry = require.resolve('react-refresh/runtime');\n// const reactRefreshWebpackPluginRuntimeEntry = require.resolve(\n//   '@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils'\n// );\n\nconst publicUrlOrPath = getPublicUrlOrPath(process.env.NODE_ENV === 'development', '/', '/public');\n\nconst moduleFileExtensions = [\n  'web.mjs',\n  'mjs',\n  'web.js',\n  'js',\n  'web.ts',\n  'ts',\n  'web.tsx',\n  'tsx',\n  'json',\n  'web.jsx',\n  'jsx',\n];\n\nmodule.exports = {\n  createWebpackConfig,\n  devConfig: createWebpackConfig,\n};\n\nfunction createWebpackConfig(workspaceDir, entryFiles, title, aspectPaths): WebpackConfigWithDevServer {\n  const resolveWorkspacePath = (relativePath) => path.resolve(workspaceDir, relativePath);\n\n  // Host\n  const host = process.env.HOST || 'localhost';\n\n  // Required for babel-preset-react-app\n  process.env.NODE_ENV = 'development';\n\n  return {\n    // Environment mode\n    mode: 'development',\n    // improves HMR\n    snapshot: { managedPaths: [] },\n\n    devtool: 'inline-source-map',\n\n    // Entry point of app\n    entry: {\n      main: entryFiles,\n      // preview: entryFiles.map(filePath => resolveWorkspacePath(filePath))\n    },\n\n    output: {\n      // Development filename output\n      filename: 'static/js/[name].bundle.js',\n\n      pathinfo: true,\n\n      path: resolveWorkspacePath('/'),\n\n      publicPath: publicUrlOrPath,\n\n      chunkFilename: 'static/js/[name].chunk.js',\n\n      // point sourcemap entries to original disk locations (format as URL on windows)\n      devtoolModuleFilenameTemplate: (info) => pathNormalizeToLinux(path.resolve(info.absoluteResourcePath)),\n\n      // this defaults to 'window', but by setting it to 'this' then\n      // module chunks which are built will work in web workers as well.\n      // Commented out to use the default (self) as according to tobias with webpack5 self is working with workers as well\n      // globalObject: 'this',\n    },\n\n    infrastructureLogging: {\n      level: 'error',\n    },\n\n    stats: 'errors-only',\n\n    devServer: {\n      allowedHosts: 'all',\n\n      static: [\n        {\n          directory: resolveWorkspacePath(publicUrlOrPath),\n          staticOptions: {},\n          // Don't be confused with `dev.publicPath`, it is `publicPath` for static directory\n          // Can be:\n          // publicPath: ['/static-public-path-one/', '/static-public-path-two/'],\n          publicPath: publicUrlOrPath,\n          // Can be:\n          // serveIndex: {} (options for the `serveIndex` option you can find https://github.com/expressjs/serve-index)\n          serveIndex: true,\n          // Can be:\n          // watch: {} (options for the `watch` option you can find https://github.com/paulmillr/chokidar)\n          watch: true,\n        },\n      ],\n\n      // Enable compression\n      compress: true,\n\n      // Enable hot reloading\n      hot: true,\n\n      host,\n\n      historyApiFallback: {\n        disableDotRule: true,\n        index: publicUrlOrPath,\n      },\n\n      client: {\n        webSocketURL: {\n          hostname: clientHost,\n          pathname: clientPath,\n          port,\n        },\n      },\n\n      onBeforeSetupMiddleware({ app, server }) {\n        // Keep `evalSourceMapMiddleware` and `errorOverlayMiddleware`\n        // middlewares before `redirectServedPath` otherwise will not have any effect\n        // This lets us fetch source contents from webpack for the error overlay\n        app.use(evalSourceMapMiddleware(server));\n        // This lets us open files from the runtime error overlay.\n        app.use(errorOverlayMiddleware());\n      },\n\n      onAfterSetupMiddleware({ app }) {\n        // Redirect to `PUBLIC_URL` or `homepage` from `package.json` if url not match\n        app.use(redirectServedPath(publicUrlOrPath));\n\n        // This service worker file is effectively a 'no-op' that will reset any\n        // previous service worker registered for the same host:port combination.\n        // We do this in development to avoid hitting the production cache if\n        // it used the same host and port.\n        // https://github.com/facebook/create-react-app/issues/2272#issuecomment-302832432\n        app.use(noopServiceWorkerMiddleware(publicUrlOrPath));\n      },\n\n      devMiddleware: {\n        // forward static files\n        publicPath: publicUrlOrPath.slice(0, -1),\n      },\n    },\n\n    resolve: {\n      // These are the reasonable defaults supported by the Node ecosystem.\n      // We also include JSX as a common component filename extension to support\n      // some tools, although we do not recommend using it, see:\n      // https://github.com/facebook/create-react-app/issues/290\n      // `web` extension prefixes have been added for better support\n      // for React Native Web.\n      extensions: moduleFileExtensions.map((ext) => `.${ext}`),\n      alias: {\n        react: require.resolve('react'),\n        'react-dom/server': require.resolve('react-dom/server'),\n        'react-dom': require.resolve('react-dom'),\n        // 'react-refresh/runtime': require.resolve('react-refresh/runtime'),\n      },\n      fallback: {\n        fs: false,\n        path: require.resolve('path-browserify'),\n        stream: false,\n        process: false,\n      },\n    },\n\n    module: {\n      // Webpack by default includes node_modules under its managed paths which cause the whole directory to be cached\n      // Watch mode requires us to turn off unsafeCache as well\n      // this de-optimizes the dev build but ensures hmr works when writing/linking into node modules.\n      // However we do not lose the caching entirely like cache: false\n      unsafeCache: false,\n      rules: [\n        {\n          test: /\\.m?js/,\n          resolve: {\n            fullySpecified: false,\n          },\n        },\n        {\n          test: /\\.js$/,\n          enforce: 'pre',\n          include: /node_modules/,\n          // only apply to packages with componentId in their package.json (ie. bit components)\n          descriptionData: { componentId: (value) => !!value },\n          use: [require.resolve('source-map-loader')],\n        },\n        {\n          test: /\\.(js|jsx|tsx|ts)$/,\n          exclude: /node_modules/,\n          include: workspaceDir,\n          loader: require.resolve('babel-loader'),\n          options: {\n            configFile: false,\n            babelrc: false,\n            presets: [\n              // Preset includes JSX, TypeScript, and some ESnext features\n              require.resolve('babel-preset-react-app'),\n            ],\n            plugins: [require.resolve('react-refresh/babel')],\n          },\n        },\n        {\n          test: stylesRegexps.sassModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            {\n              loader: require.resolve('css-loader'),\n              options: {\n                modules: {\n                  localIdentName: '[name]__[local]--[hash:base64:5]',\n                },\n                sourceMap: true,\n              },\n            },\n            {\n              loader: require.resolve('sass-loader'),\n              options: {\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.sassNoModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            require.resolve('css-loader'),\n            {\n              loader: require.resolve('sass-loader'),\n              options: {\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.lessModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            {\n              loader: require.resolve('css-loader'),\n              options: {\n                modules: {\n                  localIdentName: '[name]__[local]--[hash:base64:5]',\n                },\n                sourceMap: true,\n              },\n            },\n            {\n              loader: require.resolve('less-loader'),\n              options: {\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.lessNoModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            require.resolve('css-loader'),\n            {\n              loader: require.resolve('less-loader'),\n              options: {\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.cssModuleRegex,\n          use: [\n            require.resolve('style-loader'),\n            {\n              loader: require.resolve('css-loader'),\n              options: {\n                modules: {\n                  localIdentName: '[name]__[local]--[hash:base64:5]',\n                },\n                sourceMap: true,\n              },\n            },\n          ],\n        },\n        {\n          test: stylesRegexps.cssNoModulesRegex,\n          use: [require.resolve('style-loader'), require.resolve('css-loader')],\n        },\n      ],\n    },\n\n    plugins: [\n      new ReactRefreshWebpackPlugin({\n        include: aspectPaths, // original default value was /\\.([cm]js|[jt]sx?|flow)$/i\n        // replaces the default value of `/node_modules/`\n        exclude: [\n          /react-refresh-webpack-plugin/i,\n          // file type filtering was done by `include`, so need to negative-filter them out here\n          // A lookbehind assertion (`?<!`) has to be fixed width\n          /(?<!\\.jsx)(?<!\\.js)(?<!\\.tsx)(?<!\\.ts)$/i,\n        ],\n      }),\n      // Re-generate index.html with injected script tag.\n      // The injected script tag contains a src value of the\n      // filename output defined above.\n      new HtmlWebpackPlugin({\n        inject: true,\n        templateContent: html(title || 'My component workspace'),\n        chunks: ['main'],\n        filename: 'index.html',\n      }),\n      // new HtmlWebpackPlugin({\n      //   templateContent: html('Component preview'),\n      //   chunks: ['preview'],\n      //   filename: 'preview.html'\n      // })\n    ],\n  };\n}\n"]}